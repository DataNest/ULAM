## -*- mode:ulam -*-
#=t3392_test_compiler_typedefofaclass_funccallcast_issue
#!
##      //test bug fix: casting func call arg using typedef of another class
Exit status: 7
Ue_R { Ish2 ish( Colony(3u) colony( typedef Unsigned(3) Tail;  constant Unsigned(32) widthc = 3;  typedef Telomeree(3u) Telo;  Telomeree(3u) t( constant Unsigned(32) width = 3;  typedef Unsigned(3) Tail;  Unsigned(3) age(7); ); ); );  Int(32) test() {  ish colony ( 7u cast )setTailAge . . ish colony t ( )getAge . . . cast return } }
Uq_Telomeree { constant Unsigned(32) width = NONREADYCONST;  typedef Unsigned(UNKNOWN) Tail;  Unsigned(UNKNOWN) age(0);  <NOMAIN> }
Uq_Colony { typedef Unsigned(UNKNOWN) Tail;  constant Unsigned(32) widthc = NONREADYCONST;  typedef Telomeree(width) Telo;  Telomeree(width) t( constant Unsigned(32) width = NONREADYCONST; );  <NOMAIN> }
Uq_Ish2 { Colony(3u) colony( typedef Unsigned(3) Tail;  constant Unsigned(32) widthc = 3;  typedef Telomeree(3u) Telo;  Telomeree(3u) t( constant Unsigned(32) width = 3;  typedef Unsigned(3) Tail;  Unsigned(3) age(7); ); );  <NOMAIN> }
##      //informed by 3383,
##      // likes Telomeree first!
#>R.ulam
use Telomeree;
 use Colony;
 use Ish2;
  element R{
Ish2 ish;
 Int test() {  /*ish.colony.t.setAge((Unsigned(3)) 7);
*/ ish.colony.setTailAge(7u);
 return ish.colony.t.getAge();
}
}

#:Colony.ulam
quark Colony(Unsigned widthc){
 typedef Telomeree(widthc) Telo;
 typedef Telo.Tail Tail;
 Telo t;
 Void setTailAge(Unsigned newage) {
 t.setAge((Tail) newage);
 }
}

#:Ish2.ulam
quark Ish2{
Colony(3u) colony;
}

#:Telomeree.ulam
quark Telomeree(Unsigned width){
 typedef Unsigned(width) Tail;
 Tail age;
Tail getAge(){
 return age;
}
Void setAge(Tail newAge){
age = newAge;
}
}
#.
